define("widget/formRequest/1.0.0/formRequest",["$"],function(a,b,c){var d=a("$"),e=d,f=function(a){function b(a){var b=a;return a instanceof d||(b=e(b)),b}("string"==typeof a||a instanceof d)&&(a={form:a});var c=b(a.form),g=a.selector?c.filter(a.selector).length?c.filter(a.selector):c.find(a.selector):null,h="way"in a?a.way:!0,i="formatHtml"in a?a.formatHtml:!0,j="trim"in a?a.trim:!0,k=e("<div/>"),l='[data-request="list"]',m=c.filter(l).add(c.find(l)),n="input[name],textarea[name],select[name]",o=null,p={},q=function(a){return i?k.text(a).html():a},r=function(b){return a.Encode?a.Encode(b):b},s=function(a){var b=arguments[1]||p,c=a.indexOf("."),d=arguments[2]||a,e=a.substring(0,0>c?1e3:c);return 0>c?(b[e]=p[d],delete p[d],"ok"):(s(a.substring(c+1),b[e]||(b[e]={}),d),void 0)};if(g)var t=(g.prop("nodeName")+"").toLowerCase(),u="input"==t||"textarea"==t||"select"==t;if(g&&h?o=c.find(u?g:g.find(n)):g&&!h?(o=c.find(n).not(u?g:g.find(n)),g.filter(l).length&&(m=m.not(g.filter(l))),g.find(l).length&&(m=m.not(g.find(l)))):o=c.find(n),m.length){o=o.not(m.find(n));var v=e.extend({},a);m=m.not(m.find(l)),v.selector=l+" "+l,v.way=!1,m.each(function(a,b){var c=e(b),d=c.find(".tsh-lineData"),g=c.attr("name")||"list";d=d.length?d:c.find("tbody tr"),p[g]=f.getLineVals(d.not(d.find(d)),v)})}o.each(function(a,b){var c=e(b),d=c.attr("name"),f=c.attr("type")&&c.attr("type").toLowerCase();d&&f&&"radio"===f?c.is(":checked")&&(p[d]=q(r(j?e.trim(c.val()):c.val()))):d&&f&&"checkbox"===f?c.is(":checked")&&(p[d]?p[d].push(q(r(j?e.trim(c.val()):c.val()))):p[d]=o.filter(':checkbox:checked[name="'+d+'"]').length<2?q(r(j?e.trim(c.val()):c.val())):[q(r(j?e.trim(c.val()):c.val()))]):d&&(p[d]=q(r(j?e.trim(c.val()):c.val())))});var w=!1;if(a.split)for(var x in p)p[x]instanceof Array&&(p[x]=p[x].join(a.split)),a.nested===!0&&x.indexOf(".")>-1&&(w=!0)&&s(x);if(a.nested===!0&&w===!1)for(var x in p)x.indexOf(".")>-1&&s(x);return p};f.getLineVals=function(a,b){a=e(a),b=e.extend({},b);var c=this,d=[];return a.each(function(){b.form=this,d.push(c(b))}),d},c.exports=f});
